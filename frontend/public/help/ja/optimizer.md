# オプティマイザー ステップガイド

Ads.txt Manager オプティマイザーで利用可能な各最適化ステップについて解説します。

<a id="step1"></a>

## 1. エラーと重複のクリーンアップ (Clean Up Errors & Duplicates)

このステップでは、構文エラーの修正と冗長なエントリの削除を行い、ファイルを有効かつ簡潔な状態にします。

### 機能:
- **フォーマットエラー**: IABのads.txt仕様に従っていない行（カンマの欠落、無効な文字など）を特定します。
- **重複**: 他の行と完全に一致する行を削除します。

### 推奨アクション:
- **削除 (Remove)**: 無効な行を完全に削除します。
- **コメントアウト (Comment Out)**: `#` プレフィックスを追加して行を無効化します（例: `# INVALID: ...`）。後で確認したい場合に便利です。

---

<a id="step2"></a>

## 2. オーナードメインの確認 (Check Owner Domain)

ads.txtファイルがドメインの所有者（あなた）を正しく宣言しているかを確認します。

### 機能:
- `ownerdomain={domain}` が存在するかチェックします。
- 欠落している場合、追加することができます。
- **検証**: `ownerdomain` に記載されたドメインは、ads.txtファイルがホストされているドメイン（または親ドメイン）と一致する必要があります。

### 重要性:
所有権を宣言することで、ドメインへのなりすましを防ぎ、サプライチェーン（Sellers.json）における身元確認を強化します。

---

<a id="step3"></a>

## 3. マネージャードメインの検証 (Verify Manager Domain)

Ads.txt管理ツールやCMPを使用している場合、`managerdomain` エントリの有効性を検証します。

### 機能:
- `managerdomain=` エントリの有効性をチェックします。
- マネージャードメインが有効な `sellers.json` を持ち、あなたをパブリッシャーとしてリストしているかを確認します。

### 推奨アクション:
- マネージャードメインが無効または非アクティブな場合、削除することを推奨します。

---

<a id="step4"></a>

## 4. リレーションシップの修正 (Relationship Correction)

広告システムの `sellers.json` データに基づいて、`DIRECT` と `RESELLER` のフィールドを修正します。

### 機能:
- 各広告システム（例: google.com）の `sellers.json` ファイルを照会します。
- リスト内のあなたのアカウントIDを確認します。
- **修正**:
    - sellers.jsonで `PUBLISHER` としてリストされている場合、ads.txtエントリは `DIRECT` であるべきです。
    - sellers.jsonで `INTERMEDIARY` としてリストされている場合、ads.txtエントリは `RESELLER` であるべきです。

### 重要性:
リレーションシップタイプの不一致は、収益の損失やDSPからの警告につながる可能性があります。

---

<a id="step5"></a>

## 5. セラーの検証 (Verify Sellers)

ads.txtに記載されているセラーIDが、実際にパートナーの `sellers.json` ファイルに存在するかを検証します。

### 機能:
- ads.txtの各行を、対応する `sellers.json` と相互参照します。
- **不在確認**: セラーIDが `sellers.json` ファイルに見つからない場合、そのIDは無効または非アクティブである可能性が高いです。

### 推奨アクション:
- **削除**: IDが存在しない場合、その行はおそらく無効です。
- **コメント**: 記録のために残しますが、無効化します。

---
